<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Steven M. Mortimer" />

<meta name="date" content="2020-07-11" />

<title>Supported Queries</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Supported Queries</h1>
<h4 class="author">Steven M. Mortimer</h4>
<h4 class="date">2020-07-11</h4>


<div id="TOC">
<ul>
<li><a href="#overview" id="toc-overview">Overview</a></li>
<li><a href="#authentication" id="toc-authentication">Authentication</a></li>
<li><a href="#default-query-behavior" id="toc-default-query-behavior">Default query behavior</a></li>
<li><a href="#rest-vs.-soap-api-query-performance-test" id="toc-rest-vs.-soap-api-query-performance-test">REST vs. SOAP API
query performance test</a></li>
<li><a href="#when-to-use-the-bulk-apis-for-queries" id="toc-when-to-use-the-bulk-apis-for-queries">When to use the Bulk APIs
for queries</a></li>
<li><a href="#relationship-queries" id="toc-relationship-queries">Relationship queries</a>
<ul>
<li><a href="#child-to-parent-lookup-queries" id="toc-child-to-parent-lookup-queries">child-to-parent “lookup”
queries</a></li>
<li><a href="#parent-to-child-nested-queries" id="toc-parent-to-child-nested-queries">parent-to-child “nested”
queries</a></li>
</ul></li>
<li><a href="#troubleshooting" id="toc-troubleshooting">Troubleshooting</a></li>
</ul>
</div>

<div id="overview" class="section level2">
<h2>Overview</h2>
<p>The following vignette outlines the different types of queries that
have been documented and tested. These are the “supported” query types
that the {salesforcer} package currently handles. If you run into an
issue, please submit the issue <a href="https://github.com/StevenMMortimer/salesforcer/issues/new?assignees=StevenMMortimer&amp;labels=&amp;template=query-issue-template.md&amp;title=">HERE</a>
in the GitHub repository so that we can fix or add your query type to
this list. Thank you!</p>
<p><strong>Note</strong>: Salesforce’s proprietary form of SQL called
SOQL (Salesforce Object Query Language) is a powerful tool that allows
you to return the fields of records in almost any object in Salesforce.
This includes standard objects like Accounts, Contacts, and Tasks along
with any custom objects and custom fields created in your Org. You are
encouraged to use Bulk APIs when:</p>
<ul>
<li>You anticipate returning 10,000 records or more</li>
<li>Your query does not involve a parent-to-child nested relationship
query</li>
<li>You would like to reduce the overall number of API calls to your
Org</li>
</ul>
<p>If you are not familiar with SOQL, then please consider reading the
following resources:</p>
<ul>
<li><a rel="noopener noreferrer" target="_blank" href="https://developer.salesforce.com/docs/atlas.en-us.soql_sosl.meta/soql_sosl/sforce_api_calls_soql_sosl_intro.htm">Introduction
to SOQL and SOSL</a><br />
</li>
<li><a rel="noopener noreferrer" target="_blank" href="https://developer.salesforce.com/docs/atlas.en-us.soql_sosl.meta/soql_sosl/sforce_api_calls_soql_select.htm">SOQL
SELECT Syntax</a><br />
</li>
<li><a rel="noopener noreferrer" target="_blank" href="https://developer.salesforce.com/docs/atlas.en-us.soql_sosl.meta/soql_sosl/sforce_api_calls_soql_relationships.htm">Relationship
Queries</a><br />
</li>
<li><a rel="noopener noreferrer" target="_blank" href="https://developer.salesforce.com/docs/atlas.en-us.soql_sosl.meta/soql_sosl/async_query_overview.htm">Async
SOQL</a></li>
<li><a rel="noopener noreferrer" target="_blank" href="https://developer.salesforce.com/docs/atlas.en-us.api_asynch.meta/api_asynch/asynch_api_bulk_query_intro.htm">Overview
of queries in Bulk 1.0 API</a></li>
<li><a rel="noopener noreferrer" target="_blank" href="https://developer.salesforce.com/docs/atlas.en-us.api_asynch.meta/api_asynch/queries.htm">Overview
of queries in Bulk 2.0 API</a></li>
</ul>
<hr />
</div>
<div id="authentication" class="section level2">
<h2>Authentication</h2>
<p>First, load the {salesforcer} package and login. There are two ways
to authenticate: 1) OAuth 2.0 (SSO) and 2) Basic Username-Password. It
is recommended to use OAuth 2.0 so that passwords do not have to be
embedded in scripts or environment variables. By default, OAuth 2.0
stores the user’s credentials in a locally cached file entitled
“.httr-oauth-salesforcer” in the current working directory and will be
refreshed automatically when the session expires.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(dplyr, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(salesforcer)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">sf_auth</span>()</span></code></pre></div>
</div>
<div id="default-query-behavior" class="section level2">
<h2>Default query behavior</h2>
<p>The default API for the <code>sf_query()</code> function is the REST
API because it is both fast and flexible. Every effort has been made so
that the format of the results from the REST and SOAP APIs is exactly
the same. The only difference will be speed. The REST API uses JSON,
which can generally be processed more quickly than XML used in the SOAP
API.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>soql <span class="ot">&lt;-</span> <span class="st">&quot;SELECT Id,</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="st">                FirstName, </span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="st">                LastName</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="st">         FROM Contact</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="st">         LIMIT 10&quot;</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>queried_records <span class="ot">&lt;-</span> <span class="fu">sf_query</span>(soql) <span class="co"># REST API is the default api_type</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>queried_records</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="co">#&gt; # A tibble: 10 × 3</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="co">#&gt;   Id                 FirstName LastName        </span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;              &lt;chr&gt;     &lt;chr&gt;           </span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="co">#&gt; 1 003Kg000002AaGiIAK Test      Contact-Create-3</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="co">#&gt; 2 003Kg000002AaGjIAK Test      Contact-Create-4</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="co">#&gt; 3 003Kg000002AaJ7IAK Test      Contact-Create-1</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="co">#&gt; 4 003Kg000002AaJ8IAK Test      Contact-Create-2</span></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="co">#&gt; 5 003Kg000002Ac0xIAC Test      Contact-Create-1</span></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a><span class="co">#&gt; # ℹ 5 more rows</span></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a>queried_records <span class="ot">&lt;-</span> <span class="fu">sf_query</span>(soql, <span class="at">api_type =</span> <span class="st">&quot;SOAP&quot;</span>)</span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a>queried_records</span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a><span class="co">#&gt; # A tibble: 10 × 3</span></span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a><span class="co">#&gt;   Id                 FirstName LastName        </span></span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;              &lt;chr&gt;     &lt;chr&gt;           </span></span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a><span class="co">#&gt; 1 003Kg000002AaGiIAK Test      Contact-Create-3</span></span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a><span class="co">#&gt; 2 003Kg000002AaGjIAK Test      Contact-Create-4</span></span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a><span class="co">#&gt; 3 003Kg000002AaJ7IAK Test      Contact-Create-1</span></span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a><span class="co">#&gt; 4 003Kg000002AaJ8IAK Test      Contact-Create-2</span></span>
<span id="cb2-28"><a href="#cb2-28" tabindex="-1"></a><span class="co">#&gt; 5 003Kg000002Ac0xIAC Test      Contact-Create-1</span></span>
<span id="cb2-29"><a href="#cb2-29" tabindex="-1"></a><span class="co">#&gt; # ℹ 5 more rows</span></span></code></pre></div>
</div>
<div id="rest-vs.-soap-api-query-performance-test" class="section level2">
<h2>REST vs. SOAP API query performance test</h2>
<p>Below is a small example to roughly demonstrate the magnitude of the
performance difference between the REST and SOAP APIs when querying
1,000 records.</p>
<p><strong>Setup performance test</strong></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># create a new account </span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="co"># (if replicating, you may or may not have an external id field in your Org)</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>prefix <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;APerfTest-&quot;</span>, <span class="fu">as.integer</span>(<span class="fu">runif</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">99999</span>)))</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>new_account <span class="ot">&lt;-</span> <span class="fu">sf_create</span>(</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>    <span class="at">Name =</span> <span class="st">&quot;Test Account For Performance Test&quot;</span>, </span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>    <span class="at">My_External_Id__c =</span> prefix,</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>    <span class="at">Description =</span> <span class="fu">paste0</span>(<span class="st">&quot;This is a test account with 1,000 records for &quot;</span>, </span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>                         <span class="st">&quot;testing the performance differences between the &quot;</span>, </span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>                         <span class="st">&quot;SOAP and REST APIs.&quot;</span>)</span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a>  ), </span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a>  <span class="at">object_name =</span> <span class="st">&quot;Account&quot;</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a>)</span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a><span class="co"># create and associate a thousand new contacts with that account</span></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a><span class="co"># (again, you may or may not have an external id field in your Org)</span></span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a>prefix <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;CPerfTest-&quot;</span>, <span class="fu">as.integer</span>(<span class="fu">runif</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">99999</span>)), <span class="st">&quot;-&quot;</span>)</span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a>new_contacts <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">FirstName =</span> <span class="fu">rep</span>(<span class="st">&quot;Test&quot;</span>, n),</span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a>                       <span class="at">LastName =</span> <span class="fu">paste0</span>(<span class="st">&quot;Query-Vignette&quot;</span>, <span class="dv">1</span><span class="sc">:</span>n), </span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a>                       <span class="at">test_number__c =</span> <span class="fl">999.9</span>,</span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a>                       <span class="at">AccountId =</span> <span class="fu">rep</span>(new_account<span class="sc">$</span>id, n),</span>
<span id="cb3-23"><a href="#cb3-23" tabindex="-1"></a>                       <span class="at">My_External_Id__c=</span><span class="fu">paste0</span>(prefix, <span class="dv">1</span><span class="sc">:</span>n))</span>
<span id="cb3-24"><a href="#cb3-24" tabindex="-1"></a>new_contacts_res <span class="ot">&lt;-</span> <span class="fu">sf_create</span>(new_contacts, <span class="st">&quot;Contact&quot;</span>, <span class="at">api_type =</span> <span class="st">&quot;Bulk 2.0&quot;</span>)</span></code></pre></div>
<p><strong>Performance test</strong></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>qry <span class="ot">&lt;-</span> <span class="cf">function</span>(api_type){</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  <span class="fu">sf_query</span>(</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>    <span class="fu">sprintf</span>(<span class="st">&quot;SELECT Id, Name, Owner.Id, </span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="st">               (SELECT Id, LastName, Owner.Id FROM Contacts) </span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="st">            FROM Account</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="st">            WHERE Id = &#39;%s&#39;&quot;</span>, </span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>            new_account<span class="sc">$</span>id), </span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>    <span class="at">api_type =</span> api_type</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>  )</span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a>}</span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a>res <span class="ot">&lt;-</span> microbenchmark<span class="sc">::</span><span class="fu">microbenchmark</span>(</span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>  <span class="fu">qry</span>(<span class="st">&quot;REST&quot;</span>),</span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a>  <span class="fu">qry</span>(<span class="st">&quot;SOAP&quot;</span>),</span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a>  <span class="at">times =</span> <span class="dv">5</span>, </span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a>  <span class="at">unit =</span> <span class="st">&quot;s&quot;</span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a>)</span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a>res</span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a><span class="co">#&gt; Unit: seconds</span></span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a><span class="co">#&gt;         expr       min        lq      mean    median        uq       max neval</span></span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a><span class="co">#&gt;  qry(&quot;REST&quot;) 0.4641607 0.5989884 0.6474908 0.6146341 0.7102281 0.8494425     5</span></span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a><span class="co">#&gt;  qry(&quot;SOAP&quot;) 1.9540551 2.3230848 2.5586974 2.5208202 2.5340538 3.4614729     5</span></span>
<span id="cb4-22"><a href="#cb4-22" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" tabindex="-1"></a><span class="fu">suppressWarnings</span>(<span class="fu">suppressMessages</span>(</span>
<span id="cb4-24"><a href="#cb4-24" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">autoplot</span>(res) <span class="sc">+</span> </span>
<span id="cb4-25"><a href="#cb4-25" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">scale_y_continuous</span>(<span class="at">name=</span><span class="st">&quot;Time [seconds]&quot;</span>, <span class="at">n.breaks=</span><span class="dv">6</span>)</span>
<span id="cb4-26"><a href="#cb4-26" tabindex="-1"></a>))</span></code></pre></div>
<p><img role="img" aria-label="A violin plot showing the distribution of latency times for REST API and SOAP API" src="data:image/png;base64,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AkIgioAIKIqGjoWAEIgVARFQrHArMyEgBKIIiICiaOhYCAiBWBEQAcUKtzITAkIgioAIKIqGjoWAEIgVARFQrHArMyEgBKIIiICiaOhYCAiBWBEQAcUKtzITAkIgioAIKIqGjoWAEIgVARFQrHArMyEgBKIIiICiaOhYCAiBWBEQAcUKtzITAkIgioAIKIqGjoWAEIgVARFQrHArMyEgBKIIiICiaOhYCAiBWBEQAcUKtzITAkIgioAIKIqGjoWAEIgVARFQrHArMyEgBKIIiICiaOhYCAiBWBEQAcUKtzITAkIgioAIKIqGjoWAEIgVARFQrHArMyEgBKIIiICiaOhYCAiBWBEQAcUKtzITAkIgikCz6ImOhYAQKC4CP/74o91+++328ssvW5MmTWzHHXe0/v372+KLL17cjCo0NRFQhTacip18BGbMmGGnnnqqzZ492/bff3/7/fffbfjw4TZ16lS75JJLrFkzvX5CIPnPsUpYgQh8/PHHdsIJJ9gKK6zgSGettdZytejVq5cdeeSRduutt9rRRx9dgTUrbpFlAyounkpNCNjXX39tgwYNsuWXX97uuece8+QDND179nTE88ADDzhNqLHDJQJq7E+A6l9UBH766Sc75ZRTnL1n6NChttJKK9VIHw1ozTXXtBtuuKHGtcYWIAJqbC2u+pYMgTlz5jibz/fff+8Mz6uvvnrWvBZbbDE78cQT7Z133rFx48ZljdNYAkVAjaWlVc+SIgD5nHbaaYbt55ZbbrGOHTvmza9Pnz7Wpk0bu+uuu/LGq/aLIqBqb2HVr+QIMMpFt+vDDz905LPRRhvVmmfTpk3t//7v/+ytt95y99V6Q5VGEAFVacOqWvEg8PPPP9v5559v2H5uu+0223TTTQvOeLfddnM2IgzSjVVEQI215VXvBiMA6WDLmTx5sl1xxRXWvXv3OqWJLeiQQw6xkSNH2nfffVene6slsgioWlpS9YgVAWw+dLsYch82bJitv/769cqfCYp0xx599NF63V/pN4mAKr0FVf7YEZg/f7797W9/s08++cSNdnXp0qXeZWjevLntscce9thjj9ncuXPrnU6l3igCqtSWU7nrjMD999/viOOJJ54wNJj6yqWXXmoTJ06066+/vt6aTzTvww47zH744Qd79tlno8GJPn7jjTfs4osvdktKGlJQEVBD0NO9FYXA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la4QKCkCIqCSwlvaxD/++GM76qijbODAgfbGG2+UNjOlLgRKgIAIqASgxpXkiBEjbNlll7UuXbrYsGHD4spW+QiBoiEgAioalPEnNGrUKOvTp4/17dvXpkyZYp999ln8hVCOQqABCIiAGgBeOW+dMWOGzZo1y7baaivbfvvtrVmzZvbaa6+Vs0jKWwjUGQERUJ0hS8YNkyZNcgXZeOONbZlllrFu3brZmDFjklE4lUIIFIiACKhAoJIW7b333rNWrVrZCius4IqGJjRx4kSbO3du0oqq8giBnAiIgHJCk+wLU6dOta5du6YK2aNHD1t33XWdLSgVqAMhkHAEREAJb6BsxVuwYIF99NFH1qlTp9RlRsIIGzt2bCpMB0Ig6QiIgJLeQlnKx2jXvHnz0gioadOmtskmm9jbb7+d5Q4FCYFkIiACSma75C3V9OnT3fV11lknLR7dsPfff99mz56dFq4TIZBUBERASW2ZPOX6+uuvbcstt7SWLVumxYKAFi5caOPHj08L14kQSCoCIqCktkyecjHa9dtvv9WI0aFDB1tppZVkB6qBjAKSioAIKKktk6dcdMGiBuhoVDQjGaKjiOg4yQiIgJLcOlnKNmfOHPviiy8s0/7jo0JAn3zyidFNkwiBpCMgAkp6C2WUD/cbSD4NiOuaFQ0KkqQjIAJKegtllO+DDz4whtxzaUDYgDp37iz3HBm46TSZCIiAktkuOUvFMHu7du1siSWWyBmnV69e9tZbb9nvv/+eM44uCIEkICACSkIr1KEMLELdcMMN894BAWEr8gtW80bWRSFQRgREQGUEv65ZY1jGAM2M53wCQS233HI2evTofNF0TQiUHQERUNmboPACeLerW2yxRd6bFllkEevZs6f95z//yRtPF4VAuREQAZW7BeqQ/9NPP+38/qy88sq13rXNNtsYPqPRmCRCIKkIiICS2jL/Kxe2nFdffdWuvPJKt/tFv379CioxdiA0IXlJLAguRSoTAs3KlK+yLQABlluce+65bkgdMjn88MPtT3/6UwF3mi2//PK26aab2ssvv2x//vOfU/cEQWATJkywNddc01q0aJEK14EQKAcCIqByoF5gnjNnznTkg/aD3+fFFluswDv/G23nnXe2s846y7788ktbbbXVDPKB0F566SU3V+iGG26oU3qKLASKjYC6YMVGtIjpNWnSxKWG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KEmtUcey4KJ12LBhzj/Q1ltvbcsuu2wdU1B0IVBeBNQFKy/+Dcp9r732stVXX92lMWDAgAalpZuFQDkQkAZUDtSLlCf+ntktg51ONfmwSKAqmVgREAHFCnfxM2vatKnxJxEClYiAntxKbDWVWQhUCQIioCppSFVDCFQiAiKgSmw1lVkIVAkCIqAqaUhVQwhUIgIioEpsNZVZCFQJAiKgKmlIVUMIVCICIqBKbDWVWQhUCQIioCppSFVDCFQiAiKgSmw1lVkIVAkCIqAqaUhVQwhUIgIioEpsNZVZCFQJAiKgKmlIVUMIVCQCgUQIZCAQelcMOnXqFIR+pjOuVMdp6Evb1e+dd96pjgpl1OKtt95y9Xv33XczriTvVBpQRX42Slvo8DF1Lj74rUZR/ZLTqiKg5LSFSiIEGh0CIqBG1+S1VxhHZzvttJPbZaP22JUXg00dqd8KK6xQeYUvoMQrrriiq18luOhtQq+wgDopihAQAkKg6AhIAyo6pEpQCAiBQhEQARWKVCOLx77zM2bMqMpas4ca2xn9+uuvVVk/dsx94YUX7Icffkh8/URAiW+i+Av40Ucf2cknn2zhMG78mZc4x5NOOsluvvlme//9961fv35uY8cSZxlr8oMGDbJ7773XpkyZYkceeaR99tlnseZf18zklL6uiFV5/EcffdTuuOMOW3755auuppMmTXKbON51112ubuuss47dd999tummm1ZFXflwzJ8/3y677DJXnzlz5tjzzz/viDapFZQGlNSWKVO5llxySbv99tutQ4cOVbfPfOfOne2WW25JIfvjjz/ab7/9ljqv9IM2bdrY1Vdf7apB92v8+PHWunXrRFdLBJTo5om/cH/6059Sw+/VNkDK9kUQLPL1118bmlDfvn3jB7nEOT777LO2zz77GMPxW265ZYlza1jyIqCG4ae7KxABuirHHnusHX744bb55ptXYA3yF5mPyOOPP25rrbWWXXDBBfkjl/mqCKjMDaDs40UAw/qJJ55oAwcOtF133TXezEuc28yZM51xnWyWWmopY+vusWPHljjXhiUvAmoYfrq7ghD49ttv7dRTT7VzzjnHtt566woqeWFFxeh8+umnp+xaTDVo3759YTeXKZZGwcoEvLKNH4EHHnjAzY05/vjjU5k3b97cHnnkkdR5JR9ghMb285e//MUWWWQR4xxCSrJoKUaSW0dlEwL1QGDhwoVOC6IblnQRASW9hVQ+IVDFCMgGVMWNq6oJgaQjIAJKegupfEKgihEQAVVx46pqQiDpCIiAkt5CKp8QqGIENAxfxY1b7Kqdd955lm95xn777WcLFiywp556ys23KXb+2dJ78MEH3cpvrh1zzDG28sorZ4uW2LDrrrvOLYatbUHs3XffbdOmTXP1OOGEE6pmsbAIKLGPZvIK9uqrrzpn9ZSMl4H1VD169EgVdJtttnHuH1iNzYS/OIS5Pbie2H777R35xZFnMfO49tpr3azs2gjol19+MfwYQUS4EakWbwUahi/m09SI0ho8eLCNGDHCpk6dWtZao3Xh+/if//xnWctR38xxCcKykOOOO67WJCDaLl26OEdxSV/lXmtl/hdBGlChSCleQQi88cYbziHWVVddZeG+Ys7zYO/evZ0TML7ihx12mPXp08cuvfRSe/31141rLAplRrKXO++805544gk3mQ6t6q9//as1a1bYo4obCtJ+88033WrwHXbYwQYMGJByLfLTTz/ZJZdc4tZI0V1Dm9huu+181sZyjdtuu81GjRrlXnYIrlu3bu463ctbb73VnnnmGadtUXbKtuiii7rrdKdwY/L555/bY489ZksssYQdccQRTjvzGbBS/f777zfKwbVMGTZsmD388MM2b94822CDDeyUU05JwyYzfqWfywhd6S2YsPLTTfAOv9COLr/8crc0YMMNN3QvKksF2JFi3LhxtuOOO9o111xj//jHP1K1YJkE3hh5kbfYYgtHFvvuu2/qem0HhxxyiCO9gw46yDbZZBP3Al988cXuttmzZzsywUa1xx57OFLbZZddUuXlOuRI+Snj3LlznTsLVs8j/fv3d0sbKFv37t2NdInv7WIQE14Ihw4d6kgNwqKOuEhFnn76adt9991dfO4nvY8//thd4x/Ey0LZnj172v77728jR45MI69UxGo6CMGTCIE6IxCuMQrChY417gttFEGozbjw8IVix5WAnTqR8KsehP54gtBu5M75FxKQ28WT49BNahD67AmGDx/OqZOQxFwaL730kg9K+w3JKQg1qFRY6AMnuOmmm1LnoVuKIFzr5c4vuuiiYOmllw5CLSl1nbBVV101CJcvBKEzryB0YRGExJO6Hhq2g9CJWTBmzBhXjtBjZOqaDws1FhcWrq4PQqdnQUg87pzfFi1auHQJCLtbwbnnnuuu8W/69OlBqNmlrodruIJQY3Nl4XpoZwuuuOKKIHSaxmnAjq7gGfrqdufV8K8wvbaaGFd1iRUBuk50JRC6KvioQbvwQjfoyy+/dKe4jghfKtd9wpufF/Yp41ohK9jp4jEahhaz8847O00HuwkSEoa1bNnS/v73v/ukXXcJNxb4Tg63anbax2KLLZa6fv3117tjPCkuvvjiad01tBjSo7u35557uniE4fgM4XeNNdYwup5oV2iE2267rbvGPxaLduzYMXV+wAEHOI2KFeyUHXchdel+phKqoAN1wSqosSqxqIzWsDLbS5MmTYyNAb1w7gX7DYTFi87L6/94CT2J+Li5fq+88krDrzXGXbp3Xbt2Ta0I//77752fHJ8uvxAiBnWOIaJQQ8qaNGVjI8Podcq+yiqrpI2+Ra+TkK/7zz//7EYQf//997T0vf2IQOxddE0hotdee80R9WabbVYRu1ukVaoOJ9KA6gCWopYWAb78OFXfbbfdnP2H3LCjYJiNagq5SoE/HAy8aA78sSr8/PPPtwsvvNCGDBnifONgBMZLIISDMJ0AgzOaWNu2bW3ixIlpyYddICNd/ElDUBAE9iwEzW3ChAl2xhlnpN2T7QRNiT/y7927t4vyzTffuPt9fGxIjOhRXv7QyBieJxybUDWKNKBqbNUKrRMaAJrL2Wef7Qy3OIyHOE477bQ0rSlX9fD3fMMNNziNB42Ffb94yekGMSLlt6kJ7TCGNgSBHHzwwW7EjW4Xo2VoHmhRdJkgGwiMbhXGZoa+KRtdKbpslAsNqFevXrmKlBbOiFto37KXXnrJ5Y9jNLqcXuh2HnrooS59wr/66itDY2rXrp2PUnW/IqCqa9LKrRDdEbpPaBzrrbeerbTSSm6DPew5HNcmdIkYCkergXQY2mdbmn/961/uVkbF7rnnHguN1LbaaqtZp06dXDwmAyIbbbSRG4lCQwqNx27Eivk52KwgN/wsM8TOfWhrzMthA0DSKkTQapgWwMgb90BiG2+8cepW8kLjYXInmhBaD7tcQIDVKpqIWK0tW+H1Ysscvv4QQT7JNRERwy8aUK6lGRAJ16IGZ58P2gfXIbGojcpfnzVrlgtn14n6CJod5ctFqnQdyX/NNddMy18TEeuDtu4RAvVAoC5LDSArdjplVMkTCiNn/OUSyCWXQDq8/LkkOmkyV5x84XQH+csl3jgevY625OcjRcMr/VhdsEpvwUZefkbUWKPG5L1wXk3VosGWy8wYR2vzI2vVUFl1waqhFVUHIVChCEgDqtCGU7GFQDUgIAKqhlZUHYRAhSIgAqrQhlOxhUA1ICACqoZWVB2EQIUiIAKq0IZTsYVANSAgAqqGVlQdhECFIvD/QOJnDkz60eoAAAAASUVORK5CYII=" alt="A violin plot showing the distribution of latency times for REST API and SOAP API" /></p>
<p>As seen in the limited test above, the REST API can be anywhere from
<strong>4-6x</strong> faster than the SOAP API for a query on 1,000
contact records associated with a single Account. Breaking up the number
of records returned into smaller batches by setting
<code>QueryOptions = list(batchSize = 200)</code> typically does not
affect this result very much but it also depends on the number of fields
in the query. For the REST API the default is 2,000 records per batch
with a minimum of 200 and maximum of 2,000. For the SOAP API the default
is 500 records per batch. For both APIs it is important to note that
there is no guarantee that the requested batch size is the actual batch
size. Changes are made as necessary to maximize performance. For
example, the SOAP API states “batch size will be no more than 200 if the
SOQL statement selects two or more custom fields of type long text”. The
REST API mentions that the limit imposed by Salesforce’s app servers is
around 20,000 characters which can cause batches to be smaller. In
short, it’s generally okay to use the default batch sizes since
Salesforce may optimize over your specified batch size anyways.</p>
</div>
<div id="when-to-use-the-bulk-apis-for-queries" class="section level2">
<h2>When to use the Bulk APIs for queries</h2>
<p>A general rule of thumb for using the Bulk APIs (Bulk 1.0 and Bulk
2.0) for queries is anytime you need to retrieve more than 10,000
records. The main reasons to not use the Bulk APIs are twofold. First,
they do not support complex relationship queries or aggregate queries.
If you need to write a nested relationship or aggregate query involving
a large number of records you may be tempted to use the REST API.
However, it is recommended to perform two or more separate bulk queries
that retrieve the records you need and then join or aggregate the
results in R.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># nested relationship query </span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="co"># (supposed to return the id and first name of all contacts on each account)</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="fu">try</span>(</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>  <span class="fu">sf_query</span>(</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>    <span class="st">&quot;SELECT Id, Name, </span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="st">      (SELECT Id, FirstName FROM Contacts)</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="st">    FROM Account&quot;</span>,</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>    <span class="at">api_type =</span> <span class="st">&quot;Bulk 2.0&quot;</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>  )</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>)</span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="co">#&gt; Request failed [400]. Retrying in 1.9 seconds...</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="co">#&gt; Request failed [400]. Retrying in 2.8 seconds...</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="co">#&gt; Error : API_ERROR: Aggregate Relationships not supported in Bulk V2 Query with CSV content type</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a><span class="co"># aggregate query</span></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a><span class="co"># (supposed to return the count of contacts per account)</span></span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a><span class="fu">try</span>(</span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a>  <span class="fu">sf_query</span>(</span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a>    <span class="st">&quot;SELECT Account.Id, Count(Name) contacts_n</span></span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a><span class="st">    FROM Contact</span></span>
<span id="cb5-21"><a href="#cb5-21" tabindex="-1"></a><span class="st">    GROUP BY Account.Id&quot;</span>,  </span>
<span id="cb5-22"><a href="#cb5-22" tabindex="-1"></a>    <span class="at">api_type =</span> <span class="st">&quot;Bulk 2.0&quot;</span></span>
<span id="cb5-23"><a href="#cb5-23" tabindex="-1"></a>  )</span>
<span id="cb5-24"><a href="#cb5-24" tabindex="-1"></a>)</span>
<span id="cb5-25"><a href="#cb5-25" tabindex="-1"></a><span class="co">#&gt; Request failed [400]. Retrying in 1.8 seconds...</span></span>
<span id="cb5-26"><a href="#cb5-26" tabindex="-1"></a><span class="co">#&gt; Request failed [400]. Retrying in 2.9 seconds...</span></span>
<span id="cb5-27"><a href="#cb5-27" tabindex="-1"></a><span class="co">#&gt; Error : API_ERROR: Aggregate Relationships not supported in Bulk Query</span></span></code></pre></div>
<p>The two queries above were trying to pull all the contacts for each
account and then get a count of how many contacts there are per account.
If you have a lot of records, using the REST API to return these results
may not be feasible. Even though the Bulk APIs cannot handle the same
query, they can pull down massive amounts of data quickly. In this case
you can pull down all of the Contact records and all of the Account
records and then perform the calculation using <strong>dplyr</strong>,
like so:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>contacts <span class="ot">&lt;-</span> <span class="fu">sf_query</span>(<span class="st">&quot;SELECT Id, FirstName, Account.Id</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="st">                     FROM Contact&quot;</span>, </span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>                     <span class="at">api_type =</span> <span class="st">&quot;Bulk 2.0&quot;</span>)</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>accounts <span class="ot">&lt;-</span> <span class="fu">sf_query</span>(<span class="st">&quot;SELECT Id, Name </span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="st">                     FROM Account&quot;</span>, </span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>                     <span class="at">api_type =</span> <span class="st">&quot;Bulk 2.0&quot;</span>)</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>nested_query_recs <span class="ot">&lt;-</span> accounts <span class="sc">%&gt;%</span> </span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a>  <span class="fu">left_join</span>(contacts <span class="sc">%&gt;%</span> </span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a>              <span class="fu">rename</span>(<span class="st">`</span><span class="at">Contact.Id</span><span class="st">`</span> <span class="ot">=</span> Id, </span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a>                     <span class="st">`</span><span class="at">Contact.FirstName</span><span class="st">`</span> <span class="ot">=</span> FirstName), </span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;Id&quot;</span> <span class="ot">=</span> <span class="st">&quot;Account.Id&quot;</span>))</span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a>nested_query_recs</span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a><span class="co">#&gt; # A tibble: 518 × 4</span></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a><span class="co">#&gt;   Id                 Name                           Contact.Id Contact.FirstName</span></span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;              &lt;chr&gt;                          &lt;chr&gt;      &lt;chr&gt;            </span></span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a><span class="co">#&gt; 1 0013s00000zFdugAAC KEEP Test Account With Child … 0033s0000… KEEP             </span></span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a><span class="co">#&gt; 2 0013s00000zFdugAAC KEEP Test Account With Child … 0033s0000… KEEP             </span></span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a><span class="co">#&gt; 3 0013s00000zFdugAAC KEEP Test Account With Child … 0033s0000… KEEP             </span></span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a><span class="co">#&gt; 4 0013s00000zFdugAAC KEEP Test Account With Child … 0033s0000… KEEP             </span></span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a><span class="co">#&gt; 5 0013s00000zFdugAAC KEEP Test Account With Child … 0033s0000… KEEP             </span></span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a><span class="co">#&gt; # ℹ 513 more rows</span></span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a></span>
<span id="cb6-25"><a href="#cb6-25" tabindex="-1"></a>aggregate_query_recs <span class="ot">&lt;-</span> nested_query_recs <span class="sc">%&gt;%</span> </span>
<span id="cb6-26"><a href="#cb6-26" tabindex="-1"></a>  <span class="fu">group_by</span>(Id) <span class="sc">%&gt;%</span></span>
<span id="cb6-27"><a href="#cb6-27" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">.groups =</span> <span class="st">&#39;drop&#39;</span>, </span>
<span id="cb6-28"><a href="#cb6-28" tabindex="-1"></a>            <span class="at">contacts_n =</span> <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(Contact.Id)))</span>
<span id="cb6-29"><a href="#cb6-29" tabindex="-1"></a>aggregate_query_recs</span>
<span id="cb6-30"><a href="#cb6-30" tabindex="-1"></a><span class="co">#&gt; # A tibble: 17 × 2</span></span>
<span id="cb6-31"><a href="#cb6-31" tabindex="-1"></a><span class="co">#&gt;   Id                 contacts_n</span></span>
<span id="cb6-32"><a href="#cb6-32" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;                   &lt;int&gt;</span></span>
<span id="cb6-33"><a href="#cb6-33" tabindex="-1"></a><span class="co">#&gt; 1 0013s00000zFdugAAC        300</span></span>
<span id="cb6-34"><a href="#cb6-34" tabindex="-1"></a><span class="co">#&gt; 2 0013s00000zFgA6AAK          0</span></span>
<span id="cb6-35"><a href="#cb6-35" tabindex="-1"></a><span class="co">#&gt; 3 0013s000014jF2HAAU          0</span></span>
<span id="cb6-36"><a href="#cb6-36" tabindex="-1"></a><span class="co">#&gt; 4 0013s000014jF2vAAE          0</span></span>
<span id="cb6-37"><a href="#cb6-37" tabindex="-1"></a><span class="co">#&gt; 5 0013s000014jFj6AAE          0</span></span>
<span id="cb6-38"><a href="#cb6-38" tabindex="-1"></a><span class="co">#&gt; # ℹ 12 more rows</span></span></code></pre></div>
<p>The second reason to not use the Bulk APIs is that there is a
performance overhead associated with every bulk (asynchronous) job that
involves checking the status of the job until it succeeds or fails
before retrieving the results.</p>
<p>The example below is provided so that you can take this code as an
example to run your own performance test of queries that return 10K,
100K, 1M+ records to see where the Bulk APIs outperform the REST
API.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>qry_compare <span class="ot">&lt;-</span> <span class="cf">function</span>(api_type){</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>  soql <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;SELECT Id, LastName, Account.Id, Account.Name, Owner.Id</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="st">                   FROM Contact</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="st">                   WHERE Account.Id = &#39;%s&#39;&quot;</span>, </span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>                   new_account<span class="sc">$</span>id)</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>  <span class="fu">sf_query</span>(soql, <span class="at">api_type =</span> api_type)</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>}</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>res <span class="ot">&lt;-</span> microbenchmark<span class="sc">::</span><span class="fu">microbenchmark</span>(</span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>  <span class="fu">qry_compare</span>(<span class="st">&quot;REST&quot;</span>),</span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>  <span class="fu">qry_compare</span>(<span class="st">&quot;Bulk 1.0&quot;</span>),</span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>  <span class="fu">qry_compare</span>(<span class="st">&quot;Bulk 2.0&quot;</span>),</span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>  <span class="at">times =</span> <span class="dv">5</span>, </span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>  <span class="at">unit =</span> <span class="st">&quot;s&quot;</span></span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a>)</span></code></pre></div>
<p>Note that the Bulk 1.0 API requires users to specify the target
object along with their submitted SOQL. This is because it is needed
when creating the bulk job that will manage and execute the query.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>queried_records <span class="ot">&lt;-</span> <span class="fu">sf_query</span>(soql, <span class="at">api_type =</span> <span class="st">&quot;Bulk 1.0&quot;</span>)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="co">#&gt; Guessed &#39;Contact&#39; as the object_name from supplied SOQL.</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="co">#&gt; Please set `object_name` explicitly if this is incorrect because it is required by the Bulk APIs.</span></span></code></pre></div>
<p>As you can see above the {salesforcer} package will try to infer the
object in the query if not explicitly provided. If it does not guess
correctly, then please specify.</p>
<p><strong>Cleanup after performance tests</strong></p>
<p>By keeping track of the account ids used in our tests, it is fairly
easy to find and delete these test records from our Org to save
space.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co"># cleanup performance test Contact records ...</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>contacts_to_delete <span class="ot">&lt;-</span> <span class="fu">sf_query</span>(</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>  <span class="fu">sprintf</span>(<span class="st">&quot;SELECT Id </span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="st">          FROM Contact </span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="st">          WHERE Account.Id = &#39;%s&#39;&quot;</span>,</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>          new_account<span class="sc">$</span>id)</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>)</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="fu">sf_delete</span>(contacts_to_delete<span class="sc">$</span>Id, <span class="st">&quot;Contact&quot;</span>, <span class="at">api_type=</span><span class="st">&quot;Bulk 2.0&quot;</span>)</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="co">#&gt; # A tibble: 99 × 4</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="co">#&gt;   Id                 sf__Id             sf__Created sf__Error</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;              &lt;chr&gt;              &lt;lgl&gt;       &lt;lgl&gt;    </span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="co">#&gt; 1 003Kg000002Ac4GIAS 003Kg000002Ac4GIAS FALSE       NA       </span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a><span class="co">#&gt; 2 003Kg000002Ac4HIAS 003Kg000002Ac4HIAS FALSE       NA       </span></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a><span class="co">#&gt; 3 003Kg000002Ac4IIAS 003Kg000002Ac4IIAS FALSE       NA       </span></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a><span class="co">#&gt; 4 003Kg000002Ac4JIAS 003Kg000002Ac4JIAS FALSE       NA       </span></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a><span class="co">#&gt; 5 003Kg000002Ac4KIAS 003Kg000002Ac4KIAS FALSE       NA       </span></span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a><span class="co">#&gt; # ℹ 94 more rows</span></span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a></span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a><span class="co"># ... and finally delete the account</span></span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a><span class="fu">sf_delete</span>(new_account<span class="sc">$</span>id)</span>
<span id="cb9-21"><a href="#cb9-21" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 3</span></span>
<span id="cb9-22"><a href="#cb9-22" tabindex="-1"></a><span class="co">#&gt;   id                 success errors    </span></span>
<span id="cb9-23"><a href="#cb9-23" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;              &lt;lgl&gt;   &lt;list&gt;    </span></span>
<span id="cb9-24"><a href="#cb9-24" tabindex="-1"></a><span class="co">#&gt; 1 001Kg0000034ptTIAQ TRUE    &lt;list [0]&gt;</span></span></code></pre></div>
</div>
<div id="relationship-queries" class="section level2">
<h2>Relationship queries</h2>
<p>Salesforce supports retrieving fields from related objects when
querying another object. This is similar to performing a JOIN in SQL,
but without having to specify the join keys because Salesforce already
knows the relationship between the two objects. There are two types of
relationship queries (1. child-to-parent lookups and 2. parent-to-child
nested queries) detailed in the sections below.</p>
<div id="child-to-parent-lookup-queries" class="section level3">
<h3>child-to-parent “lookup” queries</h3>
<p>The first type of relationship query and the most common is child to
parent. For example, the Contact object (child) to their parent, the
Account object. In order to pull down parent object fields with your
child record query, you just need to prefix any fields from the related
object by concatenating the name of the object with the field name
separated by a period. In the example below we are retrieving all
Contact object records that have a relationship to an Account.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># child-to-parent relationship (e.g. Account.Name from Contact record)</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="fu">sf_query</span>(</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>  <span class="st">&quot;SELECT Id, FirstName, Account.Name</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="st">  FROM Contact</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="st">  WHERE Account.Id != null&quot;</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>)</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="co">#&gt; # A tibble: 414 × 3</span></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="co">#&gt;   Id                 FirstName Account.Name                        </span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;              &lt;chr&gt;     &lt;chr&gt;                               </span></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a><span class="co">#&gt; 1 0033s000012NkzwAAC KEEP      KEEP Test Account With Child Records</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a><span class="co">#&gt; 2 0033s000012NkzxAAC KEEP      KEEP Test Account With Child Records</span></span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a><span class="co">#&gt; 3 0033s000012NkzyAAC KEEP      KEEP Test Account With Child Records</span></span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a><span class="co">#&gt; 4 0033s000012NkzzAAC KEEP      KEEP Test Account With Child Records</span></span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a><span class="co">#&gt; 5 0033s000012Nl00AAC KEEP      KEEP Test Account With Child Records</span></span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a><span class="co">#&gt; # ℹ 409 more rows</span></span></code></pre></div>
<p>Sometimes you may notice that the requested relationship fields do
not appear in the query results. This is because the SOAP and REST APIs
do not return any related object information if it does not exist on the
record and there is no reliable way to extract and rebuild the empty
columns based on the query string. In the example below, if there were
Account information an additional column titled
<code>&quot;Account.Name&quot;</code> would appear in the results.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co"># child-to-parent relationship (e.g. Account.Name from Contact record)</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="fu">sf_query</span>(</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>  <span class="st">&quot;SELECT Id, FirstName, Account.Name</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="st">  FROM Contact</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="st">  WHERE Account.Id = null&quot;</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>)</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="co">#&gt; # A tibble: 510 × 2</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="co">#&gt;   Id                 FirstName</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;              &lt;chr&gt;    </span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="co">#&gt; 1 003Kg000002AaGiIAK Test     </span></span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a><span class="co">#&gt; 2 003Kg000002AaGjIAK Test     </span></span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a><span class="co">#&gt; 3 003Kg000002AaJ7IAK Test     </span></span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a><span class="co">#&gt; 4 003Kg000002AaJ8IAK Test     </span></span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a><span class="co">#&gt; 5 003Kg000002Ac0xIAC Test     </span></span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a><span class="co">#&gt; # ℹ 505 more rows</span></span></code></pre></div>
<p>Note, that the Bulk 1.0 and Bulk 2.0 APIs will return
<code>&quot;Account.Name&quot;</code> as a column of all <code>NA</code> values
for this query because they return results differently.</p>
<p>Finally, one aspect to note is that the Bulk 2.0 API does not support
child-to-parent-grandparent relationships as seen in the example
below:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">try</span>(</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>  <span class="fu">sf_query</span>(<span class="st">&quot;SELECT Id, FirstName, Account.Owner.Id</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="st">            FROM Contact&quot;</span>, </span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>           <span class="at">api_type =</span> <span class="st">&quot;Bulk 2.0&quot;</span>)</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>)</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="co">#&gt; # A tibble: 924 × 3</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="co">#&gt;   Id                 FirstName Account.Owner.Id</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;              &lt;chr&gt;     &lt;chr&gt;           </span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="co">#&gt; 1 0033s000012Nd60AAC Jenny     &lt;NA&gt;            </span></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a><span class="co">#&gt; 2 0033s000012Nd65AAC Jenny     &lt;NA&gt;            </span></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a><span class="co">#&gt; 3 0033s000012Nd6FAAS Jenny     &lt;NA&gt;            </span></span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a><span class="co">#&gt; 4 0033s000012Nd6UAAS Jenny     &lt;NA&gt;            </span></span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a><span class="co">#&gt; 5 0033s000012NdARAA0 Jenny     &lt;NA&gt;            </span></span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a><span class="co">#&gt; # ℹ 919 more rows</span></span></code></pre></div>
</div>
<div id="parent-to-child-nested-queries" class="section level3">
<h3>parent-to-child “nested” queries</h3>
<p>Instead of “looking up” a related field, users can write queries that
retrieve the individual records related to a parent. For example, if you
would like all of the Accounts and their Contacts you can write the
query like so:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">sf_query</span>(</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>  <span class="st">&quot;SELECT Id, Name, </span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="st">    (SELECT Id, FirstName FROM Contacts)</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="st">  FROM Account&quot;</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>)</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="co">#&gt; # A tibble: 419 × 4</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="co">#&gt;   Id                 Name                           Contact.FirstName Contact.Id</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;              &lt;chr&gt;                          &lt;chr&gt;             &lt;chr&gt;     </span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="co">#&gt; 1 0013s00000zFgA6AAK KEEP Test Account With Child … &lt;NA&gt;              &lt;NA&gt;      </span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="co">#&gt; 2 0013s00000zFdugAAC KEEP Test Account With Child … KEEP              0033s0000…</span></span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a><span class="co">#&gt; 3 0013s00000zFdugAAC KEEP Test Account With Child … KEEP              0033s0000…</span></span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a><span class="co">#&gt; 4 0013s00000zFdugAAC KEEP Test Account With Child … KEEP              0033s0000…</span></span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a><span class="co">#&gt; 5 0013s00000zFdugAAC KEEP Test Account With Child … KEEP              0033s0000…</span></span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a><span class="co">#&gt; # ℹ 414 more rows</span></span></code></pre></div>
<p>At first glance this query may appear the same as a lookup query on
the Contact object that includes the account id and name. However, the
small difference is that every Account is included, regardless of
whether or not they have a Contact. This can be helpful when you want to
ensure a query contains all of the parent records and their child
records, if they exist. Also, note that the plural object name is used
inside the nested query (“Contacts” instead of “Contact”).</p>
<p>Finally, a parent-to-child nested query can also contain a
child-to-parent lookup relationship within it. Below is an example where
the Owner Id on the Contact is included so you can know who is
responsible for the Contacts under each Account.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">sf_query</span>(</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>  <span class="st">&quot;SELECT Name, Owner.Id, </span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="st">    (SELECT Id, FirstName, Owner.Id FROM Contacts)</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="st">   FROM Account&quot;</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>)</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="co">#&gt; # A tibble: 419 × 5</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="co">#&gt;   Name                    Contact.FirstName Contact.Id Contact.Owner.Id Owner.Id</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;                   &lt;chr&gt;             &lt;chr&gt;      &lt;chr&gt;            &lt;chr&gt;   </span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="co">#&gt; 1 KEEP Test Account With… &lt;NA&gt;              &lt;NA&gt;       &lt;NA&gt;             0056A00…</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a><span class="co">#&gt; 2 KEEP Test Account With… KEEP              0033s0000… 0056A000000MPRj… 0056A00…</span></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a><span class="co">#&gt; 3 KEEP Test Account With… KEEP              0033s0000… 0056A000000MPRj… 0056A00…</span></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a><span class="co">#&gt; 4 KEEP Test Account With… KEEP              0033s0000… 0056A000000MPRj… 0056A00…</span></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a><span class="co">#&gt; 5 KEEP Test Account With… KEEP              0033s0000… 0056A000000MPRj… 0056A00…</span></span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a><span class="co">#&gt; # ℹ 414 more rows</span></span></code></pre></div>
</div>
</div>
<div id="troubleshooting" class="section level2">
<h2>Troubleshooting</h2>
<p>If you are having an issue with a query please submit in the
{salesforcer} GitHub repository at:
<a rel="noopener noreferrer" target="_blank" href="https://github.com/StevenMMortimer/salesforcer/issues">https://github.com/StevenMMortimer/salesforcer/issues</a>.
As a maintainer, queries are tough to debug because every Salesforce Org
is unique. Custom objects or relationships created in your Salesforce
Org may be different or even impossible to test in another Org. When
filing your issue please make an attempt to understand the query and
debug a little bit on your own. Here are a few suggestions:</p>
<ol style="list-style-type: decimal">
<li><p>Slightly modify your function call to <code>sf_query()</code> to
observe the results. Here are a few prompting questions that may assist
you:</p>
<ul>
<li><p>What do you see when you set <code>verbose=TRUE</code>
argument?</p></li>
<li><p>What happens if you change the <code>control</code> argument,
specifically the batch size?</p></li>
<li><p>What happens if you try using a different API (e.g. “SOAP” vs
“REST” or “Bulk 1.0” vs “Bulk 2.0”)?</p></li>
<li><p>What happens if you change your query slightly?</p></li>
<li><p>Do you need a parent-to-child nested relationship query or will a
child-to-parent lookup suffice?</p></li>
</ul></li>
<li><p>Check out Salesforce’s Workbench tool to see how it constructs
specific queries that you are debugging. The tool is available at
<code>https://workbench.developerforce.com</code> and requires a
Salesforce login (the same credentials as you normally would
use).</p></li>
<li><p>Double check Salesforce’s
<a rel="noopener noreferrer" target="_blank" href="https://developer.salesforce.com/docs/atlas.en-us.soql_sosl.meta/soql_sosl/sforce_api_calls_soql.htm">SOQL
reference guide</a> to see whether your query is supported or limited in
some way.</p></li>
<li><p>Review query unit tests at:
<a rel="noopener noreferrer" target="_blank" href="https://github.com/StevenMMortimer/salesforcer/blob/main/tests/testthat/test-query.R">https://github.com/StevenMMortimer/salesforcer/blob/main/tests/testthat/test-query.R</a>.
These unit tests were written to cover a variety of use cases and to
track any changes made between newly released versions of the Salesforce
API (typically 4 each year). These tests are an excellent source of
examples that may be helpful in troubleshooting your own query.</p></li>
<li><p>Roll up your sleeves and dive into the source code for the
{salesforcer} package. The main scripts to review are:</p>
<ul>
<li><p><a rel="noopener noreferrer" target="_blank" href="https://github.com/StevenMMortimer/salesforcer/blob/main/R/query.R">https://github.com/StevenMMortimer/salesforcer/blob/main/R/query.R</a></p></li>
<li><p><a rel="noopener noreferrer" target="_blank" href="https://github.com/StevenMMortimer/salesforcer/blob/main/R/utils-query.R">https://github.com/StevenMMortimer/salesforcer/blob/main/R/utils-query.R</a></p></li>
</ul></li>
</ol>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
